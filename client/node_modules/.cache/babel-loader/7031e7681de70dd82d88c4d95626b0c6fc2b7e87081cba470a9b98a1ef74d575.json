{"ast":null,"code":"var _jsxFileName = \"/Users/tracyyip/Desktop/pa04-webwizards/client/src/components/AnswerForm.js\";\nimport '../App.js';\nimport React from 'react';\nimport '../stylesheets/App.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass AnswerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleText = e => {\n      this.setState({\n        text: e.target.value\n      });\n    };\n    this.validateEmpty = (field, err, label) => {\n      field = field.trim();\n      if (field === \"\") {\n        err[label] = \"^Please fill out this field\";\n        return true;\n      }\n      return false;\n    };\n    this.validateHyperlink = (text, err, label) => {\n      let link = /\\[(.*?)\\]\\((.*?)\\)/g; //[...](...)\n      let check;\n      while ((check = link.exec(text)) !== null) {\n        if (check[1] === '' || check[2] === '') {\n          console.log(\"NOT ALLOWED\");\n          err[label] = \"^Neither the name nor link can be empty\";\n          return true;\n        }\n        if (!/^https?:\\/\\//.test(check[2])) {\n          console.log(\"NOT ALLOWED\");\n          err[label] = \"^A hyperlink must begin with http:// or https://\";\n          return true;\n        }\n      }\n      return false;\n    };\n    this.handleText = this.handleText.bind(this);\n    this.handlePost = this.handlePost.bind(this);\n    this.validateEmpty = this.validateEmpty.bind(this);\n    this.validateHyperlink = this.validateHyperlink.bind(this);\n    this.state = {\n      text: '',\n      ansBy: '',\n      ansDate: new Date(),\n      errors: {}\n    };\n  }\n  componentDidMount() {\n    console.log(\"populating answers? \" + this.props.populateForm);\n    if (this.props.populateForm === true) {\n      this.setState({\n        text: this.props.currAns.text\n      });\n    }\n  }\n  handlePost() {\n    const text = this.state.text;\n    let err = {};\n    let b = this.validateEmpty(text, err, \"etext\");\n    let c = this.validateHyperlink(text, err, \"elink\");\n    this.setState({\n      errors: err\n    });\n    if (!b && !c) {\n      const answer = {\n        text: text,\n        ans_by: this.props.user._id,\n        ansDate: new Date(),\n        comments: [],\n        votes: 0\n      };\n      //add the answer to the current questions' answers\n      const question = this.props.currQuestion;\n      console.log(question);\n      if (this.props.populateForm === true) {\n        axios.post(`http://localhost:8000/modifyAnswer/${this.props.currAns._id}/${this.props.currQuestion._id}`, answer).then(response => {\n          console.log(\"was able to modify answer: \" + response.data.answers + \" from question: \" + response.data.title);\n          this.props.updateAnswers();\n          this.props.updatePage(\"user_answers\");\n          this.props.onQuestion(response.data);\n          this.props.updatePopulateForm(false);\n        }).catch(error => {\n          this.props.setErr('Error creating answer');\n        });\n      } else {\n        console.log(question._id);\n        axios.post(`http://localhost:8000/addAnswer/posts/${question._id}`, answer).then(response => {\n          this.props.updatePage(\"answer_page\");\n          this.props.updateAnswers();\n          this.props.onQuestion(response.data);\n        }).catch(error => {\n          console.error('Error creating answer:', error);\n        });\n      }\n    }\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"answer_form\",\n        className: \"ans_form\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"a_textbox\",\n            className: \"labels\",\n            id: \"six\",\n            children: [\" Answer Text\", /*#__PURE__*/_jsxDEV(\"sup\", {\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 80\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 100\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            type: \"text\",\n            value: this.state.text,\n            onChange: this.handleText,\n            id: \"a_textbox\",\n            name: \"a_textbox\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 129\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            htmlFor: \"error6\",\n            className: \"error\",\n            id: \"error6\",\n            name: \"error6\",\n            children: [this.state.errors[\"etext\"], this.state.errors[\"elink\"]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 141\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            id: \"post_answer\",\n            onClick: () => this.handlePost(),\n            children: \"Post Answer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            id: \"required1\",\n            children: \"*indicates mandatory fields\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }, this);\n  }\n}\nexport default AnswerForm;","map":{"version":3,"names":["React","axios","jsxDEV","_jsxDEV","AnswerForm","Component","constructor","props","handleText","e","setState","text","target","value","validateEmpty","field","err","label","trim","validateHyperlink","link","check","exec","console","log","test","bind","handlePost","state","ansBy","ansDate","Date","errors","componentDidMount","populateForm","currAns","b","c","answer","ans_by","user","_id","comments","votes","question","currQuestion","post","then","response","data","answers","title","updateAnswers","updatePage","onQuestion","updatePopulateForm","catch","error","setErr","render","children","id","className","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","name","onClick"],"sources":["/Users/tracyyip/Desktop/pa04-webwizards/client/src/components/AnswerForm.js"],"sourcesContent":["import '../App.js';\nimport React from 'react';\nimport '../stylesheets/App.css';\nimport axios from 'axios';\n\nclass AnswerForm extends React.Component{\n  constructor(props){\n    super(props);\n    this.handleText = this.handleText.bind(this);\n    this.handlePost = this.handlePost.bind(this);\n    this.validateEmpty=this.validateEmpty.bind(this);\n    this.validateHyperlink=this.validateHyperlink.bind(this);\n    this.state = {\n      text: '',\n      ansBy: '',\n      ansDate: new Date(),\n      errors:{}\n    };\n  }\n  componentDidMount(){\n    console.log(\"populating answers? \" + this.props.populateForm);\n    if(this.props.populateForm === true){\n      this.setState({text:this.props.currAns.text});\n    }\n  }\n  handleText = (e) =>{\n    this.setState({text:e.target.value});\n  }\n  handlePost(){\n    const text = this.state.text;\n    let err={};\n    let b = this.validateEmpty(text, err, \"etext\");\n    let c = this.validateHyperlink(text, err, \"elink\");\n    this.setState({errors:err});\n    if(!b && !c){\n      const answer={ \n        text: text,\n        ans_by: this.props.user._id,\n        ansDate: new Date(),\n        comments:[],\n        votes: 0\n      };\n    //add the answer to the current questions' answers\n    const question = this.props.currQuestion;\n    console.log(question);\n    if(this.props.populateForm===true){\n      axios.post(`http://localhost:8000/modifyAnswer/${this.props.currAns._id}/${this.props.currQuestion._id}`, answer)\n      .then((response) => {\n\n        console.log(\"was able to modify answer: \" + response.data.answers + \" from question: \"  + response.data.title);\n\n        this.props.updateAnswers();\n        this.props.updatePage(\"user_answers\");\n        this.props.onQuestion(response.data);\n        this.props.updatePopulateForm(false); \n    })\n    .catch(error => {\n      this.props.setErr('Error creating answer');\n    })\n\n  }\n    else{\n      console.log(question._id);\n      axios.post(`http://localhost:8000/addAnswer/posts/${question._id}`, answer)\n      .then(response => {\n        this.props.updatePage(\"answer_page\");\n        this.props.updateAnswers();\n        this.props.onQuestion(response.data);\n    })\n    .catch(error => {\n      console.error('Error creating answer:', error);\n    });\n    }\n  }\n}\n  validateEmpty = (field, err, label)=>{\n    field=field.trim();\n    if(field===\"\"){\n      err[label]= \"^Please fill out this field\";\n      return true;\n  }\n  return false;\n}\nvalidateHyperlink = (text, err, label) =>{\n  let link = /\\[(.*?)\\]\\((.*?)\\)/g; //[...](...)\n  let check;\n  while((check = link.exec(text))!==null){\n    if(check[1]==='' || check[2]===''){\n      console.log(\"NOT ALLOWED\");\n      err[label] = \"^Neither the name nor link can be empty\";\n      return true;\n    }\n    if(!/^https?:\\/\\//.test(check[2])){\n      console.log(\"NOT ALLOWED\");\n      err[label] = \"^A hyperlink must begin with http:// or https://\";\n      return true;\n    }\n  }\n  return false;\n}\n  render() {\n    return(\n    <div>\n      <div id=\"answer_form\" className=\"ans_form\">\n        <form>\n          <label htmlFor = \"a_textbox\" className=\"labels\" id=\"six\"> Answer Text<sup>*</sup></label><br></br>\n          <textarea type=\"text\" value={this.state.text} onChange={this.handleText} id = \"a_textbox\" name=\"a_textbox\"></textarea><br></br>\n          <span htmlFor=\"error6\" className='error' id=\"error6\" name=\"error6\">{this.state.errors[\"etext\"]}{this.state.errors[\"elink\"]}</span><br></br>\n          <button type=\"button\" id=\"post_answer\" onClick={() => this.handlePost()}>Post Answer</button>\n          <label id=\"required1\">*indicates mandatory fields</label>\n        </form>\n    </div>\n  </div>\n    );\n  }\n}\n\nexport default AnswerForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}